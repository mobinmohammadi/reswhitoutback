!function(e){function t(t){for(var n,a,r=t[0],o=t[1],s=0,l=[];s<r.length;s++)a=r[s],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&l.push(i[a][0]),i[a]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);l.length;)l.shift()()}var n={},a={18:0,99:0},i={18:0,99:0};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{0:1,2:1,5:1,6:1,7:1,8:1,9:1,20:1,22:1,24:1,25:1,29:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,48:1,49:1,50:1,51:1,52:1,53:1,56:1,70:1,71:1,97:1}[e]&&t.push(a[e]=new Promise((function(t,n){for(var i=e+".fa.css",o=r.p+i,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=(d=s[l]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===i||c===o))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){var d;if((c=(d=u[l]).getAttribute("data-href"))===i||c===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var i=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.request=i,delete a[e],f.parentNode.removeChild(f),n(r)},f.href=o,document.getElementsByTagName("head")[0].appendChild(f)})).then((function(){a[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=function(e){return r.p+""+({}[e]||e)+"-"+{0:"cd272abf",1:"f99143c7",2:"8dbece4e",4:"a0fcf986",5:"a44bc9d6",6:"6dd15d8a",7:"3fd518f6",8:"94ab1bb2",9:"87570587",10:"09536ce8",12:"f3a49cf0",13:"442e4645",14:"4753c437",15:"3a0b03e2",17:"a1188b0a",20:"db38c8fd",22:"f9019516",24:"c4e57b26",25:"6aab2d11",29:"46c415e2",33:"ddf29cb2",34:"850aa40b",35:"470182cd",36:"9c4d49b1",37:"39c98007",38:"7a5a5f57",39:"e791d31e",40:"3348da0e",48:"a466b0fb",49:"5eddfd67",50:"344a05c6",51:"b90dc34c",52:"94ba689c",53:"5f0ca650",54:"a5d4920a",55:"08e30eae",56:"051f7242",69:"96ba319b",70:"b9983b98",71:"11815d63",83:"fdf09e64",84:"3a3f3a48",85:"c31c54b9",86:"52c0afba",87:"6505365d",88:"936c9be3",89:"b5c2adab",90:"db0ab723",91:"ca419f8b",93:"8b978bdb",94:"a3dae3f0",95:"c836d92f",96:"09aeea56",97:"a15aa86c",100:"8aef0f2f",101:"4de1c869",102:"deabdec5"}[e]+".js"}(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",c.name="ChunkLoadError",c.type=a,c.request=r,n[1](c)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/d-new-466/",r.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=s;r(r.s=28)}([function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return w}));var i,r={valid:function(e){var t=Number(e.charAt(9))+Number(e.charAt(10)),n=Number(e.charAt(7))+Number(e.charAt(8));return r.RandomInteger(10,99)+""+(n<10?"0"+n:n)+(t<10?"0"+t:t)},mobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/.test(e)},ios:function(){return!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},android:function(){return!!navigator.userAgent.match(/(Android)/g)},screenSize:function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},currency:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e||0;return parseInt(n)===n||(n=parseFloat(n).toFixed(2)),n.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")+(t?"  تومان":"")},truncate:function(e,t){if(e&&e.length>t&&e.length>0){var n=e+" ";return n=e.substr(0,t),(n=(n=e.substr(0,n.lastIndexOf(" "))).length>0?n:e.substr(0,t))+"..."}return e},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},isFloat:function(e){return e===+e&&e!==(0|e)},isInt:function(e){return e===+e&&e===(0|e)},toQueryString:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];for(var a in e)if(e.hasOwnProperty(a)){var i=e[a]?encodeURIComponent(e[a]):"";(i||t)&&n.push(a+"="+i)}return n.join("&")},getQueryParams:function(e){return!!e&&_.chain(e.split("&")).map((function(e){var t=e.split("=");return[t[0].toLowerCase(),decodeURIComponent(t[1])]})).object().value()},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},starRound:function(e){var t=e/5*100;return(10*Math.round(t/10)*5/100).toFixed(1)},toFarsi:function(e){return e&&(e=e.trim().replace(/ی/g,"ی").replace(/ي/g,"ی").replace(/ك/g,"ک")),e},RandomInteger:function(e,t){return Math.floor(e+Math.random()*(t+1-e))},isPersian:function(e){return/[\u0600-\u06FF\u0750-\u077F]/.test(e)},hasScrollBar:function(e){var t=document;return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))>e},supportGeo:!!navigator.geolocation,getPosition:function(e){return e||(e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),new Promise((function(t,n){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t(e)}),(function(e){console.log(e,e.code),n(1==e.code?"سرویس موقعیت مرورگر شما غیر فعال است":"موقعیت شما شناسایی نشد")}),e):n("مرورگر شما قابلیت شناسایی موقعیت شما را ندارد")}))},css:{},hasLocalStorage:!1,device:""},o=window.Modernizr;if(r.css={supportCssTransitions:o.csstransitions,supportCssAnimations:o.cssanimations,transEndEventNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[o.prefixed("transition")],animEndEventNames:{WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"}[o.prefixed("animation")]},void 0===("undefined"==typeof localStorage?"undefined":a(localStorage)))i=!1;else try{localStorage.setItem("sp:feature_test","test"),"test"===localStorage.getItem("sp:feature_test")?(localStorage.removeItem("sp:feature_test"),i=!0):i=!1}catch(e){i=!1}r.hasLocalStorage=i;var s={label:""};r.coupon={setItem:function(e){s.label=e,i?localStorage.setItem("@coupon",e):alert("lotfan in code ro jahat sefaresh be khater beseparid")},getItem:function(){var e="";return s.label?e=s.label:i&&(e=localStorage.getItem("@coupon")),e}};var l="ontouchstart"in document.documentElement,c=r.screenSize(),u=r.mobile(),d=!1;c.width>c.height&&(d=!0);var f,h=!1,p=!1;u&&(c.width<=414?h=!0:d?c.height>414?p=!0:h=!0:p=!0),f=!h&&!p;var g=r.ios(),m=r.android(),v="desktop";h?v="mobile":p&&(v="tablet"),r.device=v;var b=r,w={touch:l,mobile:h,tablet:p,desktop:f,ios:g,android:m}},function(e,t){e.exports=Backbone.Radio},function(e,t){e.exports=Backbone},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"y",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"w",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"x",(function(){return c})),n.d(t,"L",(function(){return u})),n.d(t,"H",(function(){return d})),n.d(t,"K",(function(){return f})),n.d(t,"M",(function(){return h})),n.d(t,"R",(function(){return p})),n.d(t,"F",(function(){return g})),n.d(t,"N",(function(){return m})),n.d(t,"O",(function(){return v})),n.d(t,"Q",(function(){return _})),n.d(t,"G",(function(){return b})),n.d(t,"C",(function(){return w})),n.d(t,"I",(function(){return y})),n.d(t,"A",(function(){return C})),n.d(t,"z",(function(){return k})),n.d(t,"J",(function(){return x})),n.d(t,"P",(function(){return I})),n.d(t,"E",(function(){return A})),n.d(t,"D",(function(){return S})),n.d(t,"B",(function(){return P})),n.d(t,"s",(function(){return T})),n.d(t,"r",(function(){return O})),n.d(t,"u",(function(){return L})),n.d(t,"v",(function(){return D})),n.d(t,"t",(function(){return M})),n.d(t,"q",(function(){return E})),n.d(t,"c",(function(){return V})),n.d(t,"e",(function(){return $})),n.d(t,"i",(function(){return R})),n.d(t,"n",(function(){return j})),n.d(t,"h",(function(){return q})),n.d(t,"b",(function(){return N})),n.d(t,"k",(function(){return B})),n.d(t,"l",(function(){return U})),n.d(t,"m",(function(){return z})),n.d(t,"j",(function(){return F})),n.d(t,"o",(function(){return H})),n.d(t,"p",(function(){return W}));var a="/init";console.log("/");var i="/init/seotemplate",r="/init/sections/?",o="/init/sliders/?",s="/init/brands/?cityid=",l="/area?",c="/restaurant/search",u="/user/info",d="/user/login",f="/User/PreRegister",h="/user/register",p="/user/verify",g="/user/initAccount",m="/user/resetPassword",v="/user/initpassword",_="/user/call",b="user/LeaveCompany",w="/user/ChangePassword",y="/user/inbox",C="/user/address",k="/user/altaddress",x="/user/order",I="/user/OrdersCount",A="/user/credit",S="/user/CreditHistory",P="/user/cart",T="/user/BookmarkRestaurant",O="/restaurant/data/",L="/restaurant/menu/",D="/restaurant/setting/",M="/restaurant/info/",E="/restaurant/adsticker/",V="/Order/Calculate",$="/order/CheckDuplicate",R="/track/details/",j="/order/feedbacks",q="/user/coupon",N="/order/bankgateway",B="/order/feedback/items/",U="/order/overallfeedback",z="/order/feedback",F="/order/ignorefeedback",H="/Order/Pay/",W="restaurant/RegisterRestaurants"},function(e,t){e.exports=Marionette},function(e,t){e.exports=_},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return h}));var a=n(2),i=n(3),r=n(13),o=a.Model.extend({idAttribute:"id",defaults:{id:0,name:"",title:"",lat:0,lng:0,areaList:[],zone:null,visible:!0,active:!1}}),s=a.Model.extend({idAttribute:"id",defaults:{id:null,domain:"",name:"",online:!0,offlineText:"",branch:"",address:"",logo:"",cover:"",colorCover:"",discount:0,mealTime:"",brand:"",lat:null,lng:null,fullAddress:"",deliveryTime:"",deliveryArea:[],favourite:!1,halfReady:!1,searchKey:""},initialize:function(e){this.options=e||{}},url:function(){return i.r+this.options.domain},parse:function(e){e&&(e.id=e.id.toLowerCase()),window.ActiveRestuarantData=e;var t=r.a.view_item_list;return t.gtmData={event:"view_item_list",ecommerce:{id:e.id,domain:e.domain,name:e.name,online:e.online,discount:e.discount,newDiscount:e.newDiscount}},dispatchEvent(t),e}}),l=a.Model.extend({initialize:function(e){this.options=e||{}},url:function(){return i.t+this.options.id}}),c=(a.Model.extend({defaults:{restData:{},userLogin:!1,userData:null,userSelectedArea:null,deliveryType:1,canDeliverByTaxi:!1,pickupTimes:[],locationDelivery:[],freeDelivery:!1,hasPickup:!1,pickupValue:"",orderNote:"",captcha:"",validator:"",payment:{},paymentMethod:0,basket:"",deliveryPrice:0,totalPrice:0,subTotalPrice:0,discount:0,company:!1,companyData:[],discountCompany:0,companySelected:!1,couponAdded:!1,couponCode:null,couponPercentage:0,couponDescription:"",couponThreshold:0,couponMaxAmount:0,couponGatewayId:!1,couponAddress:null,tax:0,roundNumber:0,useCredit:!1}}),a.Model.extend({idAttribute:"id",defaults:{id:0,title:"string",image:"string"}})),u=a.Model.extend({idAttribute:"id",defaults:{id:0,title:"",text:"",lat:0,lng:0,cityId:"",areaId:"",areaTitle:"",tel:"",available:!0,price:0,visible:!0,active:!1}}),d=a.Model.extend({idAttribute:"trackId",defaults:{trackId:0,finished:!1,successful:!1,restaurantId:0,restaurantName:"",restaurantBranch:"",restaurantLogo:"",restaurantDomain:"",area:"",date:"",stringDate:"",isPayed:!1,price:0}}),f=a.Model.extend({}),h=a.Model.extend({factorItems:[],idAttribute:"trackId",defaults:{id:0,date:"",delivery:0,stringDate:"",price:0,discount:0,tax:0,SumOfItems:0,restaurantBranch:"",restaurantDomain:"",restaurantLogo:"",restaurantName:"",payment:0,pos:!1,customerName:"",credit:0,coupon:"",finished:!1,message:"",successful:!1,pickUp:!1,deliverByTaxi:!1,address:"",area:"",trackId:0,status:0,remainingTime:0,deliveryDuration:0,cookingDuration:0},url:function(){return i.i+this.id},initialize:function(e){this.id=e.id},parse:function(e){return this.factorItems=e.userOrderItems,e.userOrder}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l}));var a=n(2),i=n(0),r=n(3),o=a.Model.extend({idAttribute:"id",defaults:{id:0,title:"",quantity:0,price:0},setQuanity:function(e,t){var n=this.get("quantity");return"increase"===e?++n:"decrease"===e?--n:"custom"===e&&t>0&&t<1e3&&(n+=t),n>0&&this.set("quantity",n),n}}),s=a.Collection.extend({model:o}),l=a.Model.extend({url:r.B,idAttribute:"id",defaults:{restaurant:{id:0,logo:"",name:"",title:"",branch:"",domain:"",online:!0,offlineText:"",mealTime:"",minOrder:0,payment:null},items:new s,addressId:0,price:0,amount:"",grossAmount:0,discount:0,tax:0,packagingPrice:0,deliveryDiscount:0,deliveryPriceWithDiscount:0,deliveryPrice:0,deliveryPriceValue:0,deliveryState:"",paymentMethod:"",amountBelowMin:0,usedCreditAmount:0,coupon:{label:""},useCredit:!1,businessPartnerDiscount:0,text:""},parse:function(e){var t;if(e&&e.foodItems){var n=[];if(e.foodItems.forEach((function(e){e.count>0&&n.push({id:e.foodId,title:e.title,quantity:e.count,discount:e.discount||0,price:e.eachFoodItemPrice})})),t={restaurant:{id:e.restaurant.id||0,logo:e.restaurant.logo||"",name:e.restaurant.name||"",title:e.restaurant.title||"",branch:e.restaurant.branch||"",domain:e.restaurant.domain||"",online:!!e.restaurant.online,offlineText:e.restaurant.offlineText||"",mealTime:e.restaurant.mealTime||"",minOrder:e.restaurant.minOrder||0,payment:e.restaurant.payment||null,pickupAvailable:e.restaurant.pickupAvailable||!1},items:new s(n),addressId:e.addressId||0,coupon:e.coupon||{label:""},pickup:!1},e&&e.text&&(t.text=e.text),e.coupon&&e.coupon.label&&(t.coupon.label=e.coupon.label,t.coupon.discount=i.a.currency(e.coupon.discount),t.coupon.maxDiscount=e.coupon.maxDiscount),e.factor){t.deliveryDiscount=e.factor.deliveryDiscount||0,t.deliveryState=e.factor.deliveryState||"",t.addressId=e.factor.addressId;var a=e.factor.deliveryPrice;if(t.deliveryPriceValue=a,t.addressId)if("available"==t.deliveryState)if(0===a)t.deliveryPrice="رایگان";else{if(t.deliveryDiscount>0){var r=a-t.deliveryDiscount;t.deliveryPriceWithDiscount=r?i.a.currency(r):"رایگان",t.deliveryDiscount=i.a.currency(t.deliveryDiscount)}t.deliveryPrice=i.a.currency(a)}else"taxi"==e.deliveryState?t.deliveryPrice="ارسال با آژانس":t.deliveryPrice="عدم ارسال به این آدرس";else e.factor.pickup&&(t.pickup=!0),t.deliveryPrice=0;t.trackId=e.factor.trackId,t.price=e.factor.amount,t.amount=e.factor.amount>0?i.a.currency(e.factor.amount):"رایگان",t.grossAmount=e.factor.grossAmount?i.a.currency(e.factor.grossAmount):0,t.discount=e.factor.discount?i.a.currency(e.factor.discount):0,t.tax=e.factor.tax?i.a.currency(e.factor.tax):0,t.packagingPrice=e.factor.packagingPrice?i.a.currency(e.factor.packagingPrice):0,t.amountBelowMin=e.factor.amountBelowMin||0,t.usedCreditAmount=e.factor.usedCreditAmount||0,t.paymentMethod=e.factor.paymentMethod||"bank",t.useCredit=!!e.factor.usedCreditAmount,t.businessPartnerDiscount=e.factor.businessPartnerDiscount||0}}return t}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n(5);var a=n(2),i=n(3),r=a.Model.extend({idAttribute:"mobile",defaults:{mobile:"",fullName:"",registerDate:"",image:"",email:"",tel:"",day:0,month:0,year:0,education:null,gender:1,marriage:0,credit:0,inviteCode:"",acceptedAgreement:!1,emailVerified:!1},url:i.L})},function(e,t,n){"use strict";var a=n(4),i=n(1),r=n.n(i),o=n(0);t.a=a.View.extend({ui:{credit:"#credit"},events:{"click .logout":function(e){e.preventDefault(),r.a.channel("global").trigger("user:logout")},"click .user-menu li[data-user-tab]":function(e){e.preventDefault();var t=$(e.currentTarget).closest("li");r.a.channel("global").trigger("navigate","user/"+t.data("user-tab"),{trigger:!0}),$("body").removeClass("show-user-options")}},templateContext:function(){var e=r.a.channel("global").request("app:get","user"),t=0;return e&&(t=o.a.currency(this.model.get("credit"))),{UserPic:e&&this.model.get("image")?this.model.get("image").replace("#SIZEOFIMAGE#","200x200"):"/img/general/user-default-gray.png",Credit:t}},reloadCredit:function(){var e=this;r.a.channel("global").request("user:credit").then((function(t){e._isRendered&&e.ui.credit.text(o.a.currency(t))}))}})},function(e,t,n){"use strict";var a=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){var e=void 0,t=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,f=void 0,h=void 0;function p(e){return e.getBoundingClientRect().top+t}function g(n){u||(u=n),f=o(d=n-u,t,l,c),window.scrollTo(0,f),d<c?window.requestAnimationFrame(g):(window.scrollTo(0,t+l),e&&s&&(e.setAttribute("tabindex","-1"),e.focus()),"function"==typeof h&&h(),u=!1)}return function(u){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(c=d.duration||1e3,r=d.offset||0,h=d.callback,o=d.easing||a,s=d.a11y||!1,t=window.scrollY||window.pageYOffset,void 0===u?"undefined":i(u)){case"number":e=void 0,s=!1,n=t+u;break;case"object":n=p(e=u);break;case"string":e=document.querySelector(u),n=p(e)}switch(l=n-t+r,i(d.duration)){case"number":c=d.duration;break;case"function":c=d.duration(l)}window.requestAnimationFrame(g)}}();t.a=r},function(e,t,n){"use strict";var a=n(4),i=n(12),r=n.n(i);t.a=a.View.extend({className:"alert-holder",template:r.a,templateContext:function(){return{hasConfirm:this.hasConfirm,closeBtn:this.hasClose,icon:!1===this.options.icon?"":this.options.icon||'<i class="fo fo-alert"></i>',text:this.options.text||""}},events:{"click [data-close-modal]":function(e){e.preventDefault(),e.stopPropagation(),this.canClose?this.closeAlert():console.log("ignore")},"click .btn-cancel":function(e){e.preventDefault(),e.stopPropagation(),this.hasCancel&&this.options.cancel(),this.closeAlert()},"click .btn-confirm":function(e){e.preventDefault(),e.stopPropagation(),this.hasConfirm&&(this.options.confirm(),this.closeAlert())}},initialize:function(e){this.options=e,this.hasConfirm=!1,this.hasCancel=!1,this.hasClose=!1,this.canClose=!1!==e.canClose,this.options&&(this.options.closeTimer>0||(this.hasClose=!0,"function"==typeof this.options.confirm&&(this.hasConfirm=!0),"function"==typeof this.options.cancel&&(this.hasCancel=!0)))},onRender:function(){var e=this;setTimeout((function(){e.$el.addClass("show")}),10),this.options.closeTimer>0&&setTimeout((function(){e.closeAlert()}),this.options.closeTimer)},closeAlert:function(){var e=this;this._isRendered&&(this.$el.removeClass("show"),"function"==typeof this.options.onClose&&this.options.onClose(),setTimeout((function(){e.destroy()}),250))},onDomRefresh:function(){var e=this;setTimeout((function(){e._isRendered&&e.$(".btn-cancel").focus()}),250)}})},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lightbox" data-close-modal></div><div class="box"> '+(null==(__t=icon)?"":__t)+' <div class="content"> '+(null==(__t=text)?"":__t)+" </div> ",(closeBtn||hasConfirm)&&(__p+=" <footer> ",hasConfirm&&(__p+='<button class="btn-default btn-small btn-confirm">'+(null==(__t="ادامه")?"":__t)+"</button>"),__p+=" ",closeBtn&&(__p+='<button class="btn-small btn-cancel">'+(null==(__t=hasConfirm?"انصراف":"بستن")?"":__t)+"</button>"),__p+=" </footer> "),__p+=" </div>";return __p}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={login:new Event("login"),sign_up:new Event("sign_up"),view_item_list:new Event("view_item_list"),add_to_cart:new Event("add_to_cart"),remove_from_cart:new Event("remove_from_cart"),begin_checkout:new Event("begin_checkout"),purchase:new Event("purchase")},i=function(){Object.assign(window,{hasRegisteredGTM:!0}),Object.keys(a).forEach((function(e){window.addEventListener(e,(function(e){window.dataLayer=window.dataLayer||[],"gtmData"in e&&e.gtmData&&(window.dataLayer.push({ecommerce:null}),window.dataLayer.push(e.gtmData))}))}))};"RegisterHandlers"in window||Object.assign(window,{RegisterHandlers:i}),"hasRegisteredGTM"in window||i()},function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g}));var a=n(2),i=n(6),r=n(3),o=(n(1),n(0));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e,t,n){var a;return(t="symbol"==s(a=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=a.Collection.extend({model:i.g,offset:0,limit:10,parse:function(e){return this.total=e.total,this.area=e.area,e.result}}),d=a.Collection.extend({model:i.b,parse:function(e){var t=[];return e.forEach((function(e){var n=[],a=e.area;a&&a.length>0&&a.forEach((function(t){if(t.text){var i={id:t.id,cityId:e.id,title:t.text.toLowerCase(),area:a.length>1?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.id,title:t.text},t):null,active:!1,lat:null==t?void 0:t.lat,lng:null==t?void 0:t.lng};n.push(i)}})),n.length>0&&o.a.isFloat(Number(e.lat))&&o.a.isFloat(Number(e.lng))&&t.push({id:e.id,name:e.name.toLowerCase(),title:e.text,lat:Number(e.lat.toFixed(6)),lng:Number(e.lng.toFixed(6)),areaList:n})})),t}}),f=a.Collection.extend({model:i.e,offset:0,limit:10}),h=a.Collection.extend({model:i.d}),p=a.Collection.extend({model:i.a,initialize:function(e,t){t&&(this.activeId=t.activeId)},parse:function(e){var t=this,n=[];return e&&e.length>0&&e.forEach((function(e){e.text&&o.a.isFloat(Number(e.lat))&&o.a.isFloat(Number(e.lng))&&(e.lat=Number(e.lat.toFixed(6)),e.lng=Number(e.lng.toFixed(6)),n.unshift(e)),t.activeId==e.id&&(e.active=!0)})),n}}),g=a.Collection.extend({model:i.c,url:r.b})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=o;var i={debug:!1},r={html:function(e){e&&Object.keys(e).forEach((function(t){return l(t,e[t])}))},head:function(e){e&&Object.keys(e).forEach((function(t){return c(t,e[t])}))},title:function(e){document.title=f(e)?"":e,s('itemprop="name"',e),s('property="og:title"',e),s('name="twitter:title"',e)},description:function(e){s('name="description"',e),s('itemprop="description"',e),s('property="og:description"',e),s('name="twitter:description"',e)},keywords:function(e){s('name="keywords"',Array.isArray(e)?e.join(", "):e)},image:function(e){s('itemprop="image"',e),s('property="og:image"',e),s('name="twitter:image"',e)},lang:function(e,t){l("html",{lang:e}),function(e,t){if(!e)throw new Error("Headful: You must pass all declared props when you use headful.props.x() calls.");var n="function"==typeof t?t.name:t;return!e.hasOwnProperty(n)}(t,this.ogLocale)&&function(e){if(f(e))r.ogLocale(e);else if(e.match(/^[a-z]{2}-[a-z]{2}$/i)){var t=e.split("-"),n=a(t,2),i=n[0]+"_"+n[1].toUpperCase();r.ogLocale(i)}}(e)},ogLocale:function(e){s('property="og:locale"',e)},url:function(e){c('link[rel="canonical"]',{href:e}),s('property="og:url"',e),s('name="twitter:url"',e)}};function o(e,t){Object.assign(i,t),Object.keys(e).forEach((function(t){if(!r.hasOwnProperty(t))throw new Error("Headful: Property '"+t+"' is unknown.");r[t](e[t],e)}))}function s(e,t){c("meta["+e+"]",{content:t})}function l(e,t){u(d(document,e),t)}function c(e,t){u(d(document.head,e),t)}function u(e,t){e&&Object.keys(t).forEach((function(n){f(t[n])?e.removeAttribute(n):e.setAttribute(n,t[n])}))}function d(e,t){var n=e.querySelector(t);return!n&&i.debug&&console.error("Headful: Element '"+t+"' was not found."),n}function f(e){return null==e}o.props=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(4),i=n(2),r=n(1),o=n.n(r),s=n(5),l=n.n(s),c=n(0),u=n(3),d=n(17),f=n.n(d),h=n(9),p=n(18),g=n.n(p),m=a.View.extend({template:f.a,className:"main-header",regions:{user:{el:"#user-region",replaceElement:!0}},ui:{cartSize:"#cart-size",srchInput:'input[name="q"]'},events:{"click .logo":function(e){e.preventDefault(),this.triggerMethod("logo:clicked")},"click .anc-search":function(e){e.preventDefault(),this.ui.srchInput.val(""),$("body").addClass("show-header-search"),c.b.mobile&&this.ui.srchInput.blur().focus()},"click [data-close-seacrh]":function(e){e.preventDefault(),e.stopPropagation(),this.hideSearch()},"submit form.search-input":function(e){e.preventDefault(),e.stopPropagation();var t=c.a.toFarsi(this.ui.srchInput.val());t&&(1==t.length?this.ui.srchInput.select():(this.ui.srchInput.blur(),o.a.channel("global").trigger("navigate:search","q="+encodeURIComponent(t)),this.hideSearch()))},"click .anc-open-login":function(e){e.preventDefault(),o.a.channel("global").trigger("show:login")},"click .anc-cart":function(e){e.preventDefault();var t=o.a.channel("cart");if(c.b.mobile)t.trigger("visibility",null,!0);else{var n=c.a.screenSize().width;t.trigger("visibility",null,n<=1200,!1)}},"click .anc-user-opt":function(e){if(e.preventDefault(),$("body").toggleClass("show-user-options"),$("body").hasClass("show-user-options")){var t=this.getChildView("user");t&&t.reloadCredit()}}},hideSearch:function(){$("body").removeClass("show-header-search"),this.ui.srchInput.val("")},onRender:function(){var e=$("html");c.b.touch&&e.addClass("touch"),c.b.mobile?e.addClass("mobile"):app.isTablet&&e.addClass("tablet"),c.a.ios()&&e.addClass("ios"),c.a.android()&&e.addClass("android"),$(window).on("resize",(function(){c.a.screenSize().width<=414?e.addClass("small-screen"):e.removeClass("small-screen")})).trigger("resize"),this.showUser()},showUser:function(){var e=o.a.channel("global").request("app:get","user");if(e){var t=new h.a({template:g.a,model:e});this.showChildView("user",t)}else this.showLogin()},showLogin:function(){var e=new h.a({template:l.a.template('<div class="header-user-holder clearfix" id="user-options-region"><button class="anc-login anc-open-login">ورود</button><button class="anc-signup anc-open-login">ثبت نام</button></div>')});this.showChildView("user",e),$("body").removeClass("show-user-options")}}),v=n(19),_=n.n(v),b=a.View.extend({template:_.a,className:"main-footer",templateContext:function(){return{mobile:c.b.mobile}},ui:{link:"a",orderStatus:".anc-ntfy-h"},events:{"click .links a":"goLink","click .change-language":function(e){e.preventDefault();var t=window.location.href.replace(window.location.origin+"","/en/").replace("//","/");window.location.href=t},"click .appbanner__exit":function(e){e.preventDefault(),$(e.currentTarget).parent().remove(),c.a.hasLocalStorage&&localStorage.setItem("appbanner","ignore")}},goLink:function(e){var t=$(e.currentTarget).closest("a");if(!t.attr("rel")){e.preventDefault(),e.stopPropagation();var n=t.data("page");o.a.channel("global").trigger("navigate",n,{trigger:!0})}},onRender:function(){if(c.b.mobile){var e=!0;if(c.a.hasLocalStorage&&"ignore"==localStorage.getItem("appbanner")&&(e=!1),e&&!("standalone"in window.navigator)&&!window.navigator.standalone){var t="Google Adwords"==c.a.getParameterByName("utm_source")?"https://app.adjust.com/gi8ikqd":"https://www.delino.com/app?utm_source=Delino%20Website%20(Mobile%20Devices)&utm_medium=Banner&utm_campaign=App%20Download";this.$el.append('<div class="appbanner">\n                <button class="appbanner__exit action-button"></button>\n                <div class="appbanner__icon" style="background-image: url(\'/apple-touch-icon-114x114.png\');"></div>\n                <div class="appbanner__info">\n                    <div>\n                        <div class="appbanner__info__title">'.concat("اپلیکیشن موبایل دلینو",'</div>\n                        <div class="appbanner__info__price">').concat("راحتتر سفارش بده",'</div>\n                    </div>\n                </div>\n                <a href="').concat(t,'" class="appbanner__button">\n                    <span class="appbanner__button__label">').concat("دانلود","</span>\n                </a>\n                </div>"))}}}}),w=n(20),y=n.n(w),C=n(21),k=n.n(C),x=n(7),I=a.View.extend({template:k.a,className:"item",modelEvents:{"change:quantity":function(){this.ui.label.text(this.model.get("quantity"))}},ui:{label:"label",quantity:".action-button",deleteItem:".anc-rmv"},events:{"click @ui.deleteItem":"hideMe","click @ui.quantity":"manageQuantity","click @ui.labelText":"labelClicked"},templateContext:function(){return{Price:c.a.currency(this.model.get("price"))}},manageQuantity:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target).closest("button").data("type");1===this.model.get("quantity")&&"decrease"===t?(this.remove(),this.model.set("quantity",0)):this.model.setQuanity(t)},hideMe:function(e){var t=this;e&&(e.preventDefault(),e.stopPropagation()),this.$el.removeClass("swiped"),this.$el.fadeOut(200,(function(){clearInterval(t.closeTimer)})),this.model.set("quantity",0)},labelClicked:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),$(e.target).closest("div").is(".food-qty"))return!1;clearInterval(this.closeTimer),this.$el.hasClass("swiped")?this.removeClass():(this.$el.addClass("swiped"),this.closeTimer=setTimeout((function(){t&&t._isRendered&&t.$el.removeClass("swiped")}),1500))},onBeforeDestroy:function(){clearInterval(this.closeTimer)}}),A=a.CollectionView.extend({childView:I,className:"cart-list-inner",collectionEvents:{"change:quantity":function(e){var t=e.previous("quantity")<e.get("quantity");0==e.get("quantity")?this.collection.remove(e):this.triggerMethod("update",t?"add":"remove")},add:function(e){this.triggerMethod("update","add")},remove:function(e){this.triggerMethod("update","remove"),console.log("remove remove",this)}}}),S=a.View.extend({template:y.a,className:"cart-holder empty",modelEvents:{"change:restaurant":"render"},childViewEvents:{update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.checkEmpty(),this.triggerMethod("cart:update",e)}},regions:{itemList:{el:"#cart-list",replaceElement:!0}},ui:{btn:".btn-checkout"},events:{"click .cart-close":function(e){e.preventDefault(),this.hide(!0)},"click @ui.btn":function(e){e.preventDefault();var t=this.model.get("restaurant");if(t.online){if(o.a.channel("cart").request("valid:min-price")){var n=o.a.channel("global");n.request("app:get","user")?(this.ui.btn.addClass("loading").prop("disabled",!0),n.trigger("navigate","order/checkout")):n.trigger("show:login","navigate:order/checkout")}}else o.a.channel("alert").trigger("rest:offline",t.offlineText,t.mealTime)},"click .anc-rest":function(e){e.preventDefault();var t=this.model.get("restaurant");t&&(o.a.channel("global").trigger("navigate","restaurant/"+t.domain),c.b.mobile&&this.hide(!0))},"click .anc-loc":function(e){e.preventDefault();var t=this.model.get("restaurant");o.a.channel("global").trigger("location:open",!0,t.id)},"click .anc-r-cp":function(e){e.preventDefault(),e.stopPropagation(),o.a.channel("cart").trigger("set","coupon","")},"click .anc-details":function(){this.$el.toggleClass("show-details")}},templateContext:function(){var e="",t=o.a.channel("global");if(t.request("app:get","user")&&this.model.get("addressId")){var n=t.request("app:get","userAddressList");if(n){var a=n.get(this.model.get("addressId"));a&&(e="<b>"+a.get("areaTitle")+"</b> - "+a.get("text"))}}var i=this.model.get("resturant"),r=this.model.get("items"),s=0;r&&r.forEach((function(e){return s+=e.get("quantity")}));var l=this.model.get("coupon"),u=l.percentage?c.a.currency(Number(100*l.maxDiscount/l.percentage)):0,d=t.request("app:get","businessPartner");return{MaxOrder:u,CountCart:s,CreditPrice:c.a.currency(this.model.get("usedCreditAmount")||0),deliveryLocation:e,url:i?"/restaurant/"+i.domain:"",BusinessPartner:d?{title:d.title,price:c.a.currency(this.model.get("businessPartnerDiscount")||0)}:null}},onRender:function(){var e=new A({collection:this.model.get("items")});this.showChildView("itemList",e),this.checkEmpty()},onDomRefresh:function(){var e=this.getOption("animate");this.show(e)},show:function(e){var t=this;e?setTimeout((function(){if(t._isRendered){if(c.b.mobile){t.topScroll=$(window).scrollTop();var e=function(){$("body").addClass("mo-v"),c.a.css.supportCssTransitions&&$(this).off(c.a.css.transEndEventNames)};t.$el.one(c.a.css.transEndEventNames,e),c.a.css.supportCssTransitions||e.call()}t.$el.addClass("show")}}),100):this.$el.addClass("show")},destroyMe:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.$el.removeClass("show"),setTimeout((function(){e._isRendered&&e.destroy()}),t)},hide:function(e){var t=this;e?c.b.mobile?($("body").removeClass("mo-v"),$(window).scrollTop(this.topScroll),setTimeout((function(){t.destroyMe(200)}),100)):this.destroyMe():this.destroy()},checkEmpty:function(){var e=this.model.get("items");e&&e.length>0?this.$el.removeClass("empty"):this.$el.addClass("empty")}}),P=n(11),T=n(22),O=n.n(T),L=n(13);function D(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.e(97).then(n.t.bind(null,622,7));var E=o.a.channel("cart"),V=null,R=Mn.Region.extend({attachHtml:function(e){if(e.$el.appendTo(this.$el),c.b.mobile)E.trigger("visibility",!1);else if($(window).off("resize.cart").off("scroll.openCart"),e.fixCart){var t=c.a.screenSize().width;E.trigger("visibility",!(t<=1200)),$(window).on("resize.cart",(function(){var e=c.a.screenSize().width;E.trigger("visibility",!(e<=1200),!0)}))}else E.trigger("visibility",!1)},removeView:function(e){this.destroyView(e)},onShow:function(){$(window).scrollTop(0)}}),j=a.View.extend({template:O.a,regions:{header:{el:"header",replaceElement:!0},footer:{el:"footer",replaceElement:!0},cart:"#cart",main:{el:".main-content",regionClass:R},modal:"#modal",alert:"#alert",activeOrder:{el:"#active-order",replaceElement:!0}},ui:{conn:"#connection"},events:{"click #connection button":"rereshConn"},childViewEvents:{"logo:clicked":function(){var e=this.getChildView("main");e&&"home"!=e.page&&o.a.channel("global").trigger("navigate","",{trigger:!0})},"cart:update":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.updateCart(!1,!1,e)}},initialize:function(){var e=this;this.lastRestDomain="",this.cartUpdateDelay=250,this.cart=!1,this.deliveryPrice=0,window.appView||this.reloadcart(),o.a.channel("modal").on({show:function(t){e.showChildView("modal",t)},hide:function(){e.getRegion("modal").reset()}});var t=o.a.channel("alert");t.on({customShow:function(t){e.showChildView("alert",t)},show:function(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n="string"!=typeof t?t:new P.a({confirm:a.confirm,cancel:a.cancel,onClose:a.onClose,icon:a.icon,text:t,canClose:a.canClose,closeTimer:a.closeTimer||0}),e.showChildView("alert",n)},hide:function(t){e.getRegion("alert").reset()},"rest:offline":function(e,n){t.trigger("show",e+"<br/><b>"+n+"</b>",{closeTimer:1500,icon:'<i class="fo fo-clock"></i>'})}}),this.connection=null,o.a.channel("connection").on({show:function(t){e.connection=t,e.ui.conn.addClass("show"),e.connTimer=setTimeout((function(){e.rereshConn()}),3e3)}}),this.device=c.a.device},rereshConn:function(){clearTimeout(this.connTimer),this.ui.conn.removeClass("show"),this.connection&&"function"==typeof this.connection.refresh&&this.connection.refresh(),this.connection=null},onRender:function(){var e=this;if(window.appView){var t=$("html").addClass("app");c.b.mobile?t.addClass("mobile"):app.isTablet&&t.addClass("tablet"),c.a.ios()&&t.addClass("ios"),c.a.android()&&t.addClass("android")}else this.showChildView("header",new m),this.showChildView("footer",new b),E.on({visibility:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getChildView("main");if(n||a||null!==t||!i||!i.fixCart){var r,o=e.getChildView("cart"),s=!0;if(!0===t?(r=!0,s=!1):!1===t?(r=!1,s=!1):r=!o,r){if(!o&&(e.showCart(s),!c.b.mobile&&null===t)){var l=e.getChildView("main");"search"!=l.page&&"home"!=l.page||$(window).on("scroll.openCart",(function(){$(window).off("scroll.openCart");var t=e.getChildView("cart");t&&t.hide(s)}))}}else o&&o.hide(s)}},set:function(t,n){if(e.cart){switch(t){case"pickup":return n&&e.cart.set("addressId",null),e.cart.set("pickup",n),void e.updateCart(!0,!0);case"address":return e.cart.set("addressId",n),e.cart.set("pickup",!1),void e.updateCart(!0,!0);case"coupon":n&&e.cart.set("paymentMethod","bank"),e.cart.set("coupon",{label:n});break;case"credit":!0===n&&e.cart.set("paymentMethod","bank"),e.cart.set("useCredit",n);break;case"payment":"bank"!=n&&e.cart.set("useCredit",!1),e.cart.set("paymentMethod",n);break;case"items":e.cart.set("items",n);break;case"deliveryPrice":e.deliveryPrice=n,console.log("delivery set to:",n)}e.updateCart(!0)}else setTimeout((function(){E.trigger("set",t,n)}),150)},reload:function(){e.updateCart(!0)},"rest:notify":function(t){var n=e.getChildView("cart");n&&n.$el[t?"addClass":"removeClass"]("notify")},"check:rest:data":function(){if(e.cart){var t=o.a.channel("global").request("app:get","cartRestData"),n=e.cart.get("restaurant").domain;(null===t||t.domain!=n)&&e.cartGetRestData(n)}}}).reply({reorder:function(t,n,a){e.cart&&(e.cart.set("items",new x.c(a)),e.setRestaurantCart(t,n)),e.updateCart(!0)},action:function(t,n,a,i){if(t&&a&&n>=0){var r=e.cart.get("restaurant").id;if(0==r)e.setRestaurantCart(a,i);else if(r!=a.get("id")){var s=o.a.channel("alert"),l=e.cart.get("restaurant");return void s.trigger("show","سبد خرید شما حاوی غذا از  <b>${RESTNAME}</b> است، آیا مایل به خالی کردن سبد خریدت هستی؟".replace("${RESTNAME}",l.title+" "+l.name+(l.branch?" <small> ("+l.branch+")</small>":"")),{confirm:function(){var n=e.getRegion("cart");n.currentView&&n.$el.css("opacity",.1),e.cart.set("items",new x.c([{id:t.get("id"),title:t.get("title"),quantity:1,discount:0,price:t.get("price")}])),e.setRestaurantCart(a,i),e.updateCart(!1,!1,"reassign")},icon:'<i class="fo fo-cart"></i>'})}t.set("quantity",n);var c=e.cart.get("items"),u=e.getChildView("cart");if(c){var d=c.get(t.get("id"));if(d)return d.set("quantity",n),u||e.updateCart(!0),void e.updateCartSize()}var f=new x.b({id:t.get("id"),title:t.get("title"),quantity:1,discount:0,price:t.get("price")});c.unshift(f),u||e.updateCart(!0),e.updateCartSize()}},data:function(){return new Promise((function(t,n){!1!==e.cart&&t(e.cart),n()}))},"valid:min-price":function(){var t=!0;if(e.cart.get("amountBelowMin")>0){var n=o.a.channel("alert"),a="لطفا حداقل <b>${AMOUNTBELOWMIN}</b> دیگر به سبد خرید اضافه کنید.";a=a.replace("${AMOUNTBELOWMIN}",c.a.currency(e.cart.get("amountBelowMin"))),n.trigger("show",a,{closeTimer:2e3,icon:'<i class="fo fo-cart"></i>'}),t=!1}return t}}),o.a.channel("global").request("app:get","user")&&this.checkActiveOrder()},setRestaurantCart:function(e,t){this.cart&&this.cart.set("restaurant",{id:e.get("id"),logo:e.get("logo"),name:e.get("name"),title:"",branch:e.get("branch"),domain:e.get("domain"),online:e.get("online"),offlineText:e.get("offlineText"),mealTime:e.get("mealTime"),minOrder:t.minOrder,payment:t.payment,pickupAvailable:t.delivery.pickup})},showCart:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1!==this.cart){var n=this.getChildView("cart");n&&!t||(n=new S({animate:e,model:this.cart}),this.showChildView("cart",n))}else this.forceShowCart=!0},reloadcart:function(e){var t=this;this.getCartData().then((function(n){t.cart=new x.a(n,{parse:!0}),null===n&&t.cart.set("items",new x.c),t.updateCartSize(),e&&!c.b.mobile?(t.getChildView("cart")&&t.showCart(!1,!0),t.syncPageViewByCart()):t.forceShowCart&&(t.forceShowCart=!1,t.showCart())})).catch((function(e){var n=t.getCartParams({basketItems:[{foodId:0,count:0}],restaurantId:0});t.calculateCart(n).then((function(e){console.log("cart reset and ready!")})),t.reloadcart(!0)}))},getCartData:function(){var e=this;return new Promise((function(t,n){var a=o.a.channel("global");if(a.request("app:get","user"))$.get(u.B).always((function(i,r){if("success"==r&&i){if(i.addressId){var o=!0,s=a.request("app:get","address");s&&s.get("id")==i.addressId&&(o=!1),o&&a.request("address:set",i.addressId,!1,!1)}i.restaurant.id=i.restaurant.id.toLowerCase();var c=[];i.basketItems.forEach((function(e){e.count>0&&c.push({foodId:e.foodId,count:e.count})})),e.lastRestDomain=i.restaurant.domain;var u=e.getCartParams({basketItems:c,restaurantId:i.restaurant.id,addressId:i.addressId,pickup:i.pickup,coupon:{label:i.coupon},paymentMethod:i.paymentMethod,useCredit:i.useCredit,usedCreditAmount:i.useCredit,note:i.note});0===c.length&&(u.basketItems=[{foodId:0,count:0}],u.restaurantId=0),e.calculateCart(u).then((function(e){if(e){var a=l.a.extend({restaurant:i.restaurant},e);t(a)}else n("calculate err.")}))}else t(null)}));else{var i=null;c.a.hasLocalStorage&&(i=JSON.parse(localStorage.getItem("cart"))),t(i)}}))},calculateCart:function(e){var t=this;return new Promise((function(n,a){$.post(u.c,e).always((function(e,a){V||(V=e);var i=null;if("success"==a)n(i=e||null);else if("error"==a&&400==e.status){if((i=e.responseJSON||null).message.indexOf("COUPON")>-1)return o.a.channel("alert").trigger("show",i.text),t.cart.set("coupon",null),$(".form-add-coupon :text").val(""),void n(t.cart);var r=t.getCartParams({basketItems:[{foodId:0,count:0}],restaurantId:0});t.calculateCart(r).then((function(e){n(i)}))}}))}))},updateCart:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={add:"add_to_cart",remove:"remove_from_cart",reassign:"reassign_cart"};if(!n||a[n])return clearTimeout(this.cartUpdateTimer),new Promise((function(i,r){e.cartUpdateTimer=setTimeout((function(){e.$el.addClass("loading-cart");var t=[],r=e.cart.get("items");r&&r.length>0&&r.forEach((function(e){e.get("quantity")&&t.push({foodId:e.get("id"),count:e.get("quantity")})})),0===t.length&&(t=[{foodId:0,count:0}]),e.lastRestDomain=e.cart.get("restaurant").domain;var s={basketItems:t,restaurantId:e.cart.get("restaurant").id,addressId:e.cart.get("addressId"),pickup:e.cart.get("pickup"),coupon:e.cart.get("coupon"),paymentMethod:e.cart.get("paymentMethod"),useCredit:e.cart.get("useCredit"),usedCreditAmount:e.cart.get("useCredit"),note:cart.note},u=e.getCartParams(s);e.calculateCart(u).then((function(t){var r=e.cart.attributes.restaurant.name,s=L.a.add_to_cart,u=window.ActiveMenuData?window.ActiveMenuData.map((function(e){return D(e.sub[0].food)})).flat():null,d=null,f=o.a.channel("global").request("app:get","user"),h=[];if(a[n]&&h.push(a[n]),t)if(V&&V.factor&&t.factor&&(V.factor.discount!==t.factor.discount&&h.push("update_cart_discount"),V.factor.tax!==t.factor.tax&&h.push("update_cart_tax"),V.factor.deliveryPrice!==t.factor.deliveryPrice&&h.push("update_cart_delivery_price")),h.length>0&&h.forEach((function(e){s.gtmData={event:e,ecommerce:{value:t.factor?t.factor.amount:null,currency:"USD",coupon:t.coupon?t.coupon.label.toUpperCase():null,discount:t.factor?t.factor.discount:null,tax:t.factor?t.factor.tax:null,deliveryPrice:t.factor?t.factor.deliveryPrice:null,items:t.foodItems?t.foodItems.map((function(e,t){return{item_id:e.foodId,item_name:e.title,item_brand:r,item_category:window.ActiveMenuData?window.ActiveMenuData.find((function(t){return t.sub[0].food.indexOf((function(t){return t.id==e.attributes.id}))})).title:null,item_variant:window.ActiveRestuarantData?window.ActiveRestuarantData.address:null,index:u?u.findIndex((function(t){return t.id==e.foodId})):null,price:e.eachFoodItemPrice,discount:e.discount,quantity:e.count}})):null}},dispatchEvent(s)})),t.foodItems.length>0){var p=e.cart.get("restaurant");d=l.a.extend({restaurant:p},t),!f&&c.a.hasLocalStorage&&localStorage.setItem("cart",JSON.stringify(d))}else d=l.a.extend({restaurant:{id:0}},t),!f&&c.a.hasLocalStorage&&localStorage.removeItem("cart");e.cart=new x.a(d,{parse:!0}),setTimeout((function(){e.syncPageViewByCart()}),0);var g=e.getChildView("cart");g&&(g=new S({animate:!1,model:e.cart}),e.showChildView("cart",g)),e.updateCartSize();var m=e.getRegion("cart");m.currentView&&m.$el.css("opacity",1),V=t,i()})).catch((function(t){console.log(t),clearTimeout(e.updateCartTimer),e.updateCartTimer=setTimeout((function(){e.updateCart()}),150)}))}),t?0:e.cartUpdateDelay)}))},updateCartSize:function(){var e=0,t=this.cart.get("items");t&&(t.forEach((function(t){e+=t.get("quantity")})),this.getChildView("header").ui.cartSize.html(e||"&nbsp;"))},syncPageViewByCart:function(e){var t=this.getChildView("main");if(t)if("restaurant"===t.page)t.syncByCart(!0),t.showDeliveryPrice();else if("checkout"===t.page)if(0==this.cart.get("restaurant").id){var n=o.a.channel("global");this.lastRestDomain?n.trigger("navigate","restaurant/"+this.lastRestDomain):n.trigger("navigate","")}else t.cart=this.cart,t.updateFromCart();this.$el.removeClass("loading-cart")},getCartParams:function(e){var t=o.a.channel("global"),n={basketItems:e.basketItems,restaurantId:e.restaurantId,paymentMethod:e.paymentMethod||"bank",device:this.device,useCredit:!!e.useCredit,forSubmission:!1},a=t.request("app:get","businessPartner")||null;if(a&&(n.businessPartner=a.name),e.usedCreditAmount&&(n.usedCreditAmount=e.usedCreditAmount),e.note&&(n.note=e.note),e.coupon&&e.coupon.label&&(n.coupon=e.coupon.label),e.pickup)n.pickup=!0;else{if(e.addressId)n.addressId=e.addressId;else if(t.request("app:get","user")){var i=t.request("app:get","address");i&&(n.addressId=i.get("id"))}this.deliveryPrice&&(n.deliveryPrice=this.deliveryPrice)}return n},checkActiveOrder:function(){var e=this;$.get(u.J+"?active=true").done((function(t){return e.activeOrderProcess(t)}))},activeOrderProcess:function(e){var t=!1;if(e&&e.length){for(var a,r=!1,s=0,l=e.length;s<l;s++)e[s].finished||(r=!0,e[s].successful||e[s].isPayed||(t=!0,a||(a=e[s])));r&&(o.a.channel("global").request("app:set","activeOrders",e),this.showChildView("activeOrder",new q)),t&&n.e(71).then(n.bind(null,623)).then((function(e){a.price=c.a.currency(a.price);var t=o.a.channel("alert");setTimeout((function(){t.trigger("customShow",new e.UnsuccessPaymentAlert({model:new i.Model(a)}))}),1500)}))}t||this.checkReview()},checkReview:function(){$.get(u.n).done((function(e){if(e&&e.length){var t=o.a.channel("modal");n.e(2).then(n.bind(null,186)).then((function(n){var a=e[0];a.overallFeedback=!1,t.trigger("show",new n.FeedbackModal({model:new i.Model(a)}))}))}}))}}),q=a.View.extend({template:l.a.template('<button class="anc-ntfy fo fo-bell round-full transition-all"><span class="round-full hidden"></span><i class="loader"></i></button>'),className:"anc-ntfy-h",events:{"click button":function(e){e.preventDefault(),e.stopPropagation(),this.showOrderStatus()}},onDomRefresh:function(){var e=this;setTimeout((function(){e.$el.addClass("show new")}),100)},showOrderStatus:function(e){var t=this,n=o.a.channel("global"),a=n.request("app:get","activeOrders");a&&a.length&&(this.$el.addClass("loading").removeClass("new"),a&&(1==a.length?n.trigger("navigate","track/"+a[0].trackId):n.trigger("navigate","user/orders"),setTimeout((function(){return t.$el.removeClass("loading")}),1500)))}})},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="/" class="logo"><img class="desktop" src="'+(null==(__t="/img/general/logo-delino-new.svg")?"":__t)+'" alt="'+(null==(__t="لوگو دلینو")?"":__t)+'"> <img class="mobile" src="'+(null==(__t="/img/general/logo-delino-sign.svg")?"":__t)+'" alt="'+(null==(__t="لوگو دلینو")?"":__t)+'"></a><div class="right-holder"><div id="user-region"></div></div><div class="left-holder"><button class="anc-cart has-guide transition-all"><div class="anc-inner"><i class="fo fo-cart"></i> <span id="cart-size">&nbsp;</span></div><div class="loader"></div><div class="intro-guide top-left"><p>'+(null==(__t="در هر جای دلینو میتونی از اینجا سبد خریدت رو پیدا کنی")?"":__t)+'</p><nav><span class="action-button anc-prev">قبلی <i class="fo fo-arrow-left"></i></span> <span class="action-button anc-next">بعدی <i class="fo fo-arrow-left"></i></span></nav></div></button><div class="search-holder has-guide"><button class="anc-search"><i class="fo fo-search"></i></button><form class="search-input" action="/search" method="get" autocomplete="off"><i class="fo fo-search"></i> <span class="anc-rmv anc-r-t"><span>&times;</span></span> <input type="search" placeholder="'+(null==(__t="جستجوی رستوران یا غذا ...")?"":__t)+'" name="q" autocomplete="off"></form><button class="anc-cancel" data-close-seacrh>'+(null==(__t="انصراف")?"":__t)+'</button><div class="lightbox transition-all" data-close-seacrh></div><div class="intro-guide top-left"><p>'+(null==(__t="با کلیک روی این قسمت، میتونی غذا یا رستوران مورد نظرت رو جستجو کنی")?"":__t)+'</p><nav><span class="action-button anc-prev">قبلی <i class="fo fo-arrow-left"></i></span> <span class="action-button anc-next">بعدی <i class="fo fo-arrow-left"></i></span></nav></div></div></div>';return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="user-holder"><div class="user-account"><a href="#" class="user-menu-anc anc-user-opt"><span>'+(null==(__t=fullName)?"":__t)+'</span><i class="fo fo-angle-down"></i></a></div><div class="user-options"><div class="lightbox anc-user-opt transition-all"></div><div class="inner-content transition-all"><button class="anc-cl fo fo-cross visible-xs anc-user-opt"></button><div class="user-options-header"><figure class="round-circle"><img src="'+(null==(__t=UserPic)?"":__t)+'" alt=""></figure><aside><h4><div>'+(null==(__t=fullName)?"":__t)+"</div><small>"+(null==(__t="اعتبار")?"":__t)+': <span id="credit">'+(null==(__t=Credit)?"":__t)+'</span></small></h4></aside></div><div class="user-menu"><ul><li data-user-tab="message"><a href="'+(null==(__t="/")?"":__t)+'user/message"><i class="fo fo-mail"></i>'+(null==(__t="پیام‌ها")?"":__t)+'</a></li><li data-user-tab="wallet"><a href="'+(null==(__t="/")?"":__t)+'user/wallet"><i class="fo fo-cash"></i> '+(null==(__t="کیف پول")?"":__t)+'</a></li><li data-user-tab="profile"><a href="'+(null==(__t="/")?"":__t)+'user/profile"><i class="fo fo-info"></i>'+(null==(__t="اطلاعات من")?"":__t)+'</a></li><li data-user-tab="addresses"><a href="'+(null==(__t="/")?"":__t)+'user/addresses"><i class="fo fo-pin"></i> '+(null==(__t="آدرس‌ها")?"":__t)+'</a></li><li data-user-tab="orders"><a href="'+(null==(__t="/")?"":__t)+'user/orders"><i class="fo fo-orders"></i>'+(null==(__t="سفارشات من")?"":__t)+'</a></li><li data-user-tab="favorites"><a href="'+(null==(__t="/")?"":__t)+'user/favorites"><i class="fo fo-heart"></i>'+(null==(__t="علاقه‌مندی‌ها")?"":__t)+'</a></li><li data-user-tab="invite"><a href="'+(null==(__t="/")?"":__t)+'user/invite"><i class="fo fo-discount"></i>'+(null==(__t="دعوت از دوستان")?"":__t)+'</a></li><li data-user-tab="settings"><a href="'+(null==(__t="/")?"":__t)+'user/settings"><i class="fo fo-settings"></i> '+(null==(__t="تغییر رمز")?"":__t)+'</a></li><li class="logout"><a href="/">'+(null==(__t="خروج")?"":__t)+"</a></li></ul></div></div></div></div>";return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="wrapper"><div class="footer-top"><button class="change-language"><i class="fo fo-earth"></i> '+(null==(__t="English")?"":__t)+"</button></div></div> ",mobile?__p+=' <div class="mob-ftr"><div class="ftr-op transition-all"><div class="wrapper"><div class="btm-sec"><div class="row clearfix"><div class="mini-nav"><div class="logo visible-md-ib visible-lg-ib"><img src="/img/general/logo-delino-new.png" width="40" height="40" alt="'+(null==(__t="لوگو دلینو")?"":__t)+'"></div><nav class="links transition-all"><a href="https://www.delino.com/blog" target="_blank" rel="noopener">'+(null==(__t="وبلاگ دلینو")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'about" data-page="about" title="'+(null==(__t="درباره")?"":__t)+'">'+(null==(__t="درباره")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'contact" data-page="contact" title="'+(null==(__t="تماس با ما")?"":__t)+'">'+(null==(__t="تماس با ما")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'terms" data-page="terms" title="'+(null==(__t="قوانین")?"":__t)+'">'+(null==(__t="قوانین")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'faq" data-page="faq" title="'+(null==(__t="سوالات متداول")?"":__t)+'">'+(null==(__t="سوالات متداول")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'privacy" data-page="privacy" title="'+(null==(__t="حریم شخصی")?"":__t)+'">'+(null==(__t="حریم شخصی")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'vendorregistration" data-page="vendorregistration" title="ثبت نام رستوران">'+(null==(__t="ثبت نام رستوران")?"":__t)+'</a></nav></div><nav class="social-nav transition-all"><a target="_blank" rel="noopener" href="https://www.instagram.com/delinofood/"><i class="fo fo-instagram"></i></a> <a target="_blank" rel="noopener" href="https://telegram.me/delinofood"><i class="fo fo-telegram"></i></a> <a target="_blank" rel="noopener" href="https://www.facebook.com/delinofood"><i class="fo fo-facebook"></i></a> <a target="_blank" rel="noopener" href="https://twitter.com/delinofood"><i class="fo fo-twitter"></i></a> <a target="_blank" rel="noopener" href="http://www.aparat.com/delinofood"><i class="fo fo-aparat"></i></a> <a target="_blank" rel="noopener" href="https://www.linkedin.com/company/delino"><i class="fo fo-linkedin"></i></a></nav></div></div></div></div><p>'+(null==(__t="&copy; تمامی حقوق برای دلینو محفوظ است")?"":__t)+'</p><div class="row clearfix"><ul class="app-links" style="display:none"><li><a href="https://sibapp.com/applications/OnlineDelino" title="iOS app" target="_blank" rel="noopener" class="transition-all"><img src="'+(null==(__t="/img/general/label-app-ios-sibapp.png")?"":__t)+'"></a></li><li><a href="'+(null==(__t="/apps/delino-app-v1.13.2.apk")?"":__t)+'" title="android app" target="_blank" rel="noopener"><img src="'+(null==(__t="/img/general/label-app-android-direct.png")?"":__t)+'" alt="'+(null==(__t="دانلود اپلیکیشن اندروید دلینو")?"":__t)+'"></a></li></ul></div></div> ':__p+=' <div class="wrapper"><div class="btm-sec"><div class="row clearfix"><div class="mini-nav"><div class="logo visible-md-ib visible-lg-ib"><img src="/img/general/logo-delino-new.png" width="40" height="40" alt="'+(null==(__t="لوگو دلینو")?"":__t)+'"></div><nav class="links transition-all"><a href="https://www.delino.com/blog" target="_blank" rel="noopener" title="'+(null==(__t="وبلاگ دلینو")?"":__t)+'">'+(null==(__t="وبلاگ دلینو")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'about" data-page="about" title="'+(null==(__t="درباره")?"":__t)+'">'+(null==(__t="درباره")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'contact" data-page="contact" title="'+(null==(__t="تماس با ما")?"":__t)+'">'+(null==(__t="تماس با ما")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'terms" data-page="terms" title="'+(null==(__t="قوانین")?"":__t)+'">'+(null==(__t="قوانین")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'faq" data-page="faq" title="'+(null==(__t="سوالات متداول")?"":__t)+'">'+(null==(__t="سوالات متداول")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'privacy" data-page="privacy" title="'+(null==(__t="حریم شخصی")?"":__t)+'">'+(null==(__t="حریم شخصی")?"":__t)+'</a><a href="'+(null==(__t="/")?"":__t)+'vendorregistration" data-page="vendorregistration" title="ثبت نام رستوران">'+(null==(__t="ثبت نام رستوران")?"":__t)+'</a></nav></div><nav class="social-nav transition-all"><a target="_blank" rel="noopener" href="https://www.instagram.com/delinofood/"><i class="fo fo-instagram"></i></a> <a target="_blank" rel="noopener" href="https://telegram.me/delinofood"><i class="fo fo-telegram"></i></a> <a target="_blank" rel="noopener" href="https://www.facebook.com/delinofood"><i class="fo fo-facebook"></i></a> <a target="_blank" rel="noopener" href="https://twitter.com/delinofood"><i class="fo fo-twitter"></i></a> <a target="_blank" rel="noopener" href="http://www.aparat.com/delinofood"><i class="fo fo-aparat"></i></a> <a target="_blank" rel="noopener" href="https://www.linkedin.com/company/delino"><i class="fo fo-linkedin"></i></a></nav></div><div class="row clearfix"><p>'+(null==(__t="تمامی لوگوها و اطلاعات رستوران ها با احترام متعلق به مالکین رستوران ها است و امتیاز استفاده از این اطلاعات تنها برای دلینو مجاز است")?"":__t)+'</p><ul class="app-links"><li><a href="https://sibapp.com/applications/OnlineDelino" title="iOS app" target="_blank" rel="noopener" class="transition-all"><img src="'+(null==(__t="/img/general/label-app-ios-sibapp.png")?"":__t)+'"></a></li><li><a href="'+(null==(__t="/apps/delino-app-v1.13.2.apk")?"":__t)+'" title="android app" target="_blank" rel="noopener"><img src="'+(null==(__t="/img/general/label-app-android-direct.png")?"":__t)+'" alt="'+(null==(__t="دانلود اپلیکیشن اندروید دلینو")?"":__t)+'"></a></li></ul></div></div></div> ',__p+=' <a href="http://www.alexa.com/siteinfo/delino.com"><script type="text/javascript" src="http://xslt.alexa.com/site_stats/js/t/a?url=delino.com"><\/script></a><svg id="stars" style="display: none;" version="1.1"><symbol id="stars-full-star" viewBox="0 0 115 20"><polygon points="10,0 13.1,6.6 20,7.6 15,12.8 16.2,20 10,16.6 3.8,20 5,12.8 0,7.6 6.9,6.6 "/></symbol><symbol id="stars-half-star" viewBox="0 0 115 20"><polygon points="10,16.6 10,0 6.9,6.6 0,7.6 5,12.8 3.8,20" fill="#f5a623 "/></symbol><symbol id="stars-all-star" viewBox="0 0 115 20"><use xlink:href="#stars-full-star"/><use xlink:href="#stars-full-star" transform="translate(23)"/><use xlink:href="#stars-full-star" transform="translate(46)"/><use xlink:href="#stars-full-star" transform="translate(69)"/><use xlink:href="#stars-full-star" transform="translate(92)"/></symbol><symbol id="stars-0-0-star" viewBox="0 0 115 20"><use xlink:href="#stars-all-star" fill="#d8d8d8 "/></symbol><symbol id="stars-0-5-star" viewBox="0 0 115 20"><use xlink:href="#stars-0-0-star"/><use xlink:href="#stars-half-star"/></symbol><symbol id="stars-1-0-star" viewBox="0 0 115 20"><use xlink:href="#stars-0-0-star"/><use xlink:href="#stars-full-star" fill="#f5a623 "/></symbol><symbol id="stars-1-5-star" viewBox="0 0 115 20"><use xlink:href="#stars-1-0-star"/><use xlink:href="#stars-half-star" transform="translate(23)"/></symbol><symbol id="stars-2-0-star" viewBox="0 0 115 20"><use xlink:href="#stars-1-0-star"/><use xlink:href="#stars-full-star" fill="#f5a623 " transform="translate(23)"/></symbol><symbol id="stars-2-5-star" viewBox="0 0 115 20"><use xlink:href="#stars-2-0-star"/><use xlink:href="#stars-half-star" transform="translate(46)"/></symbol><symbol id="stars-3-0-star" viewBox="0 0 115 20"><use xlink:href="#stars-2-0-star"/><use xlink:href="#stars-full-star" fill="#f5a623 " transform="translate(46)"/></symbol><symbol id="stars-3-5-star" viewBox="0 0 115 20"><use xlink:href="#stars-3-0-star"/><use xlink:href="#stars-half-star" transform="translate(69)"/></symbol><symbol id="stars-4-0-star" viewBox="0 0 115 20"><use xlink:href="#stars-3-0-star"/><use xlink:href="#stars-full-star" fill="#f5a623 " transform="translate(69)"/></symbol><symbol id="stars-4-5-star" viewBox="0 0 115 20"><use xlink:href="#stars-4-0-star"/><use xlink:href="#stars-half-star" transform="translate(92)"/></symbol><symbol id="stars-5-0-star" viewBox="0 0 115 20"><use xlink:href="#stars-all-star" fill="#f5a623 "/></symbol></svg>';return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<header><button class="anc-cl cart-close fo fo-cross"></button><h3> '+(null==(__t="سبد خرید")?"":__t)+' <span data-device="true">(<b class="cart-size">'+(null==(__t=CountCart)?"":__t)+'</b>)</span></h3></header><div class="cart-top"><div class="rest-info"> ',restaurant&&(__p+=" <figure> ",restaurant.logo&&(__p+=' <img src="'+(null==(__t=restaurant.logo.replace("#SIZEOFIMAGE#","180x180"))?"":__t)+'"> '),__p+=" </figure><aside> "+(null==(__t=restaurant.title)?"":__t)+" "+(null==(__t=restaurant.name)?"":__t)+" ",restaurant.branch&&(__p+="<small>("+(null==(__t="شعبه")?"":__t)+" "+(null==(__t=restaurant.branch)?"":__t)+")</small>"),__p+=' <div><a class="anc-rest" href="'+(null==(__t=url)?"":__t)+'">'+(null==(__t="مشاهده منو")?"":__t)+"</a></div></aside> "),__p+=' </div></div><div class="cart-rest-notify"><i class="fo fo-cart"></i> ',restaurant&&(__p+=" <h2> "+(null==(__t="سبد خرید")?"":__t)+" <strong>"+(null==(__t=restaurant.title)?"":__t)+" "+(null==(__t=restaurant.name)?"":__t)+" ",restaurant.branch&&(__p+=" <small>("+(null==(__t="شعبه")?"":__t)+" "+(null==(__t=restaurant.branch)?"":__t)+") "),__p+="</small></strong></h2> "),__p+=' <div class="button-holder" style="display: none"><button class="btn-default btn-small">'+(null==(__t="مشاهده سبد خرید")?"":__t)+'</button></div></div><div class="cart-holder-inner thin-scrollbar"><div class="cart-list-holder"><div id="cart-list"></div><div class="empty-text"><img src="/img/general/fig-cart-empty.png"> <span>'+(null==(__t="سبد خرید خالی است")?"":__t)+'</span></div></div></div><div class="cart-bottom"> ',(packagingPrice||discount||deliveryLocation||useCredit&&usedCreditAmount>0||tax)&&(__p+='<button class="anc-details">'+(null==(__t="جزییات")?"":__t)+' <i class="fo fo-angle-up"></i></button>'),__p+=" ",packagingPrice&&(__p+=' <div class="row cart-discount canhide"><label>'+(null==(__t="هزینه بسته‌بندی")?"":__t)+"</label> <span>"+(null==(__t=packagingPrice)?"":__t)+"</span></div> "),__p+=" ";var businessPartnerPrice=BusinessPartner&&BusinessPartner.price||0;discount&&(__p+=' <div class="row cart-discount canhide"><label>'+(null==(__t=" تخفیف")?"":__t)+" </label> <span><b>"+(null==(__t=discount)?"":__t)+"</b></span> ",coupon&&coupon.label&&(__p+=' <div class="coupon-row"><label id="coupon-name"> '+(null==(__t="کد تخفیف")?"":__t)+' <a href="#" class="anc-r-cp">('+(null==(__t="حذف کد")?"":__t)+")</a> <small>"+(null==(__t=coupon.percentage)?"":__t)+"% "+(null==(__t="تا سقف سفارش")?"":__t)+" "+(null==(__t=coupon.maxDiscount?MaxOrder:"نامحدود")?"":__t)+"</small></label> <span>"+(null==(__t=coupon.label)?"":__t)+"</span></div> "),__p+=" ",BusinessPartner&&(__p+=' <div class="coupon-row"><label>'+(null==(__t=BusinessPartner.title)?"":__t)+" <small>مبلغ تخفیف "+(null==(__t=BusinessPartner.price)?"":__t)+"</small></label></div> "),__p+=" </div> "),__p+=" ",deliveryLocation&&(__p+=' <div class="row cart-delivery canhide"><label>'+(null==(__t="هزینه ارسال")?"":__t)+"</label> ",deliveryDiscount?__p+=' <span class="has-discount"><small>'+(null==(__t=deliveryPrice)?"":__t)+"</small><b>"+(null==(__t=deliveryPriceWithDiscount)?"":__t)+"</b></span> ":__p+=" <span><b>"+(null==(__t=deliveryPrice)?"":__t)+"</b></span> ",__p+=" <address><span>"+(null==(__t=deliveryLocation)?"":__t)+'</span><a href="#" class="anc-loc">'+(null==(__t="تغییر آدرس")?"":__t)+"</a></address></div> "),__p+=" ",useCredit&&usedCreditAmount>0&&(__p+=' <div class="row cart-credit canhide"><label>استفاده از'+(null==(__t="اعتبار")?"":__t)+"</label> <span><b>"+(null==(__t=CreditPrice)?"":__t)+"</b></span></div> "),__p+=" ",tax&&(__p+=' <div class="row cart-tax canhide"><label>'+(null==(__t="مالیات")?"":__t)+"</label> <span><b>"+(null==(__t=tax)?"":__t)+"</b></span></div> "),__p+=' <div class="row cart-total"><label>'+(null==(__t="هزینه کل")?"":__t)+'</label> <span class="'+(null==(__t=deliveryDiscount||discount?"has-discount":"")?"":__t)+'"><small>'+(null==(__t=grossAmount||"")?"":__t)+"</small><b>"+(null==(__t=amount)?"":__t)+'</b></span></div><div class="row button-holder"><button class="btn-default btn-checkout"><span>'+(null==(__t="نهایی کردن سفارش")?"":__t)+'</span><div class="loader white"></div></button> <button class="btn-outline-gray btn-edit-cart anc-return-menu">'+(null==(__t="بازگشت به منو")?"":__t)+"</button></div></div>"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button class="anc-rmv">&times;</button><div class="item-holder"><aside><h3>'+(null==(__t=title)?"":__t)+" <small>"+(null==(__t=Price)?"":__t)+'</small></h3></aside><div class="qty-holder"><div class="food-qty"><button class="action-button button-plus fo fo-plus" data-type="increase"></button> <label>'+(null==(__t=quantity)?"":__t)+'</label> <button class="action-button button-minus fo fo-minus" data-type="decrease"></button></div></div></div>';return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header></header><div id="cart"></div><div class="main-content" style="min-height:650px"></div><footer></footer><section id="modal"></section><div id="alert"></div><div id="active-order"></div><div id="connection" class="connection-alert"><div><span>'+(null==(__t="دریافت اطلاعات با مشکل همراه است")?"":__t)+"</span><button></button></div></div>";return __p}},,,,function(e,t){e.exports=jQuery},,function(e,t,n){"use strict";n.r(t);var a=n(4),i=n(2),r=n.n(i),o=n(1),s=n.n(o),l=n(0),c=(n(5),n(6)),u=s.a.channel("global"),d=Mn.Object.extend({initialize:function(e){},showHome:function(e,t){var a=this;if(t){var i=l.a.getQueryParams(decodeURIComponent(t));i&&i.bp_pass&&u.request("app:set","businessPartner",{name:"OK",title:"باشگاه مشتریان افق کوروش",logo:"https://www.delino.com/img/general/logo-okclub.png"})}else if(u.request("app:get","address"))u.trigger("navigate","",{trigger:!1,replace:!0});else if(e)"tehran"==e.toLowerCase()&&u.trigger("navigate","",{trigger:!1,replace:!0}),u.request("city:set",e,!1,!0);else{var r=u.request("app:get","city");r&&u.trigger("navigate",1==r.get("id")?"":r.get("name"),{trigger:!1,replace:!0})}Promise.all([n.e(1),n.e(22)]).then(n.bind(null,663)).then((function(e){a.show(e.HomeView)})).catch((function(){s.a.channel("connection").trigger("show",{refresh:function(){a.showHome(e,t)}})}))},showHomeEn:function(e,t){this.showHome(e,t)},showRest:function(e,t,n){var a=this;if(e instanceof r.a.Model)this._showRestView(e,t,n,!1);else{var i=new c.g({domain:e});i.fetch().then((function(){if(!u.request("app:get","address")){var e=i.get("areaId");if(e){var r=u.request("app:get","area");r&&r==e||u.request("area:set",e,i.get("cityId"))}else u.request("city:set",i.get("cityId"),!0,!0)}a._showRestView(i,t,n)}))}},_showRestView:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Promise.all([n.e(1),n.e(25)]).then(n.bind(null,662)).then((function(n){var o=new n.RestView({firstPageLoad:r,model:e,query:i,section:t});a.show(o,!0),s.a.channel("restaurant").on({"food:to:cart":function(e,t){o.foodToCart(e,t)}})})).catch((function(){s.a.channel("connection").trigger("show",{refresh:function(){a._showRestView(e,i,r)}})}))},showSearch:function(e){var t=this;n.e(20).then(n.bind(null,664)).then((function(n){var a=new n.SearchView({params:e});t.show(a,!0)})).catch((function(){s.a.channel("connection").trigger("show",{refresh:function(){t.showSearch(e)}})}))},showUser:function(e,t){var a=this,i=s.a.channel("global");if(i.request("app:get","user"))e?e=e.toLowerCase():(e="info",i.trigger("navigate","user/info")),n.e(52).then(n.bind(null,612)).then((function(n){var i=new n.UserView({page:e,query:t});a.show(i,!0,{title:"حساب کاربری - دلینو",description:""})})).catch((function(){s.a.channel("connection").trigger("show",{refresh:function(){a.showUser(e,t)}})}));else{var o="navigate:"+r.a.history.fragment;i.trigger("navigate",""),setTimeout((function(){i.trigger("show:login",o)}),100)}},showCheckout:function(){var e=this,t=s.a.channel("global");if(t.request("app:get","user"))n.e(24).then(n.bind(null,666)).then((function(t){e.show(t.CheckoutView,!1,{title:"پرداخت - دلینو"});var n=e.getOption("rootView");if(n){var a=n.getRegion("cart");a&&a.$el.find(".btn-checkout").removeClass("loading").prop("disabled",!1)}})).catch((function(){s.a.channel("connection").trigger("show",{refresh:function(){e.showCheckout()}})}));else{var a="navigate:"+r.a.history.fragment;t.trigger("navigate",""),setTimeout((function(){t.trigger("show:login",a)}),100)}},showTrack:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"!=typeof a&&(a=!1),e){var i=new c.h({id:e});i.fetch().done((function(r,o){n.e(40).then(n.bind(null,613)).then((function(e){var n=new e.TrackView({reviewMode:a,model:i});t.show(n,!0,{title:"وضعیت سفارش - دلینو"})})).catch((function(n){console.log(n),s.a.channel("connection").trigger("show",{refresh:function(){t.showTrack(e)}})}))})).fail((function(e,t){alert("این سفارش موجود نیست")}))}else u.trigger("navigate","",{trigger:!1,replace:!0})},showInvite:function(){this.showHome(null,!0),n.e(39).then(n.bind(null,614)).then((function(e){setTimeout((function(){s.a.channel("modal").trigger("show",new e.InviteModal({model:new i.Model(window.invite)}))}),100)}))},showSuggestion:function(e){var t=this;e?$.get("/user/FoodRecommendation/"+e).always((function(e,a){"success"==a&&e?n.e(29).then(n.bind(null,615)).then((function(n){var a=new n.SuggestionView({model:new i.Model(e)});t.show(a,!0)})):window.location="/"})):window.location="/"},showVendorRegister:function(){var e=this;n.e(56).then(n.bind(null,616)).then((function(t){return e.show(t.VendorRegistrationView,!1,{title:"دلینو - ثبت نام و همکاری رستوران با دلینو",description:"رستورانتون رو در دلینو ثبت کنید و فروشتون رو افزایش بدید"})}))},showAbout:function(){var e=this;n.e(90).then(n.bind(null,617)).then((function(t){return e.show(t.AboutView,!1,{title:"درباره دلینو - سفارش آنلاین غذا از رستوران های تهران",description:""})}))},showContact:function(){var e=this;n.e(70).then(n.bind(null,618)).then((function(t){return e.show(t.ContactView,!1,{title:"تماس با دلینو - سفارش آنلاین غذا از رستوران های تهران",description:""})}))},showFaq:function(){var e=this;n.e(91).then(n.bind(null,619)).then((function(t){return e.show(t.FaqView,!1,{title:"سوالات متداول - دلینو",description:""})}))},showTerms:function(){var e=this;n.e(94).then(n.bind(null,620)).then((function(t){return e.show(t.TermsView,!1,{title:"قوانین - دلینو",description:""})}))},showPrivacy:function(){var e=this;n.e(93).then(n.bind(null,621)).then((function(t){return e.show(t.PrivacyView,!1,{title:"حریم شخصی - دلینو",description:""})}))},showReview:function(e){this.showTrack(e,!0)},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,a=this.getOption("rootView"),i=t?e:new e,r=a.getRegion("main").hasView(),o=$("body");r?o.removeClass().addClass(i.bodyClass):(o.addClass("first").removeClass("loading"),o.addClass(i.bodyClass)),r&&"restaurant"==a.getChildView("main").page&&"search"!=i.page&&u.request("app:set","search",this.search),a.showChildView("main",i),u.trigger("seo:set",n),s.a.channel("modal").trigger("hide"),s.a.channel("alert").trigger("hide"),o.removeClass("show-header-search")}}),f=Mn.AppRouter.extend({initialize:function(e){this.controller=new d(e)},appRoutes:{"(en/)about(/)":"showAbout","(en/)contact(/)":"showContact","(en/)faq(/)":"showFaq","(en/)terms(/)":"showTerms","(en/)privacy(/)":"showPrivacy","(en/)vendorregistration(/)":"showVendorRegister","(en/)review/:id(?*)":"showReview","(en/)order/checkout(/)":"showCheckout","(en/)search(?*filter)(/)":"showSearch","(en/)restaurant/:domain(/)(:section)(/)(?*)":"showRest","(en/)invite/:domain(/)(?*)":"showInvite","(en/)user/:section(?*)":"showUser","(en/)track/:id(?*)":"showTrack","en(/)(:city)(/)(?*)":"showHomeEn","(:city)(/)(?*)":"showHome","(en/)suggestion/:id(?*)":"showSuggestion","*path":"showHome"},_routeToRegExp:function(e){return e=Backbone.Router.prototype._routeToRegExp.call(this,e),new RegExp(e.source,"i")}}),h=n(3),p=n(14),g=n(8),m=n(16),v=n(15),b=n.n(v),w=n(10);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.e(101).then(n.t.bind(null,602,7)),n.e(17).then(n.t.bind(null,146,7)),n.e(86).then(n.t.bind(null,603,7));var k=a.Application.extend({region:{el:"#app",replaceElement:!0},onStart:function(e){var t=this,a=s.a.channel("global");a.on({"navigate:search":function(e){o.controller.showSearch(e),a.trigger("navigate","search?"+e,{trigger:!1})},"navigate:invite":function(e){o.controller.showInvite(e),a.trigger("navigate","invite/"+e,{trigger:!1})},"navigate:rest":function(e,t){var n=new c.g(e.toJSON(),{parse:!0});o.controller.showRest(n,"search="+encodeURIComponent(t)),"mohsen"!==n.options.domain?a.trigger("navigate","restaurant/"+e.get("domain"),{trigger:!1}):window.open("https://order.mohsen-ir.com/order?utm_source=delino&utm_medium=page&utm_campaign=delino+to+vendo&utm_content=delino.com","_blank")},navigate:function(e,t){r.a.history.navigate("/"+e,t||{trigger:!0})},"show:login":function(e){t.data.loginAction=e;var a=s.a.channel("modal");Promise.all([n.e(10),n.e(6)]).then(n.bind(null,604)).then((function(e){a.trigger("show",new e.LoginModal)}))},"user:logedIn":function(e,n){if(t.data.user=new g.a(e),i.getChildView("header").showUser(),n){a.trigger("login:action:check");try{window.ga("send","pageview","/signup-complete")}catch(e){}}else t.loadUserCompany(),t.data.loginAction?(a.trigger("login:action:check"),t.reloadAddressList()):a.request("user:address:reload").then((function(){}));l.a.hasLocalStorage&&localStorage.removeItem("cart"),t.loadChat();var r=i.getChildView("main");try{r.afterlogin()}catch(e){}},"user:logout":function(){if(t.data.user){if(t.data.user.destroy(),t.data.user=null,t.data.userAddressList=null,t.data.userCompanyList=null,i.getChildView("header").showUser(),$.get("/user/logout"),l.a.hasLocalStorage&&localStorage.removeItem("cart"),i.reloadcart(!0),t.data.address){t.data.address=null;var e=i.getChildView("main");if(e)try{e.onUser(!1)}catch(e){}}setTimeout((function(){s.a.channel("alert").trigger("show","شما از حساب کاربری خود خارج شدید",{closeTimer:1e3,icon:'<i class="fo fo-user"></i>'})}),150)}},"login:action:check":function(){var e=t.data.loginAction;if(e&&("string"==typeof e||e instanceof String)){var r=e.split("navigate:");if(r[1])"order/checkout"==r[1]?i.updateCart(!0).then((function(){i.cart&&i.cart.get("restaurant").id?a.trigger("navigate",r[1]):a.trigger("navigate","",{trigger:!0,replace:!0})})):(i.reloadcart(!0),a.trigger("navigate",r[1]));else switch(r[0]){case"address:add":n.e(8).then(n.bind(null,111)).then((function(e){var t=new e.AddressModal({editMode:!1});s.a.channel("modal").trigger("show",t)}))}}else i.checkActiveOrder();t.data.loginAction=""},"location:open":function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;l.b.mobile||e?(t=e?t:null,Promise.all([n.e(0),n.e(5)]).then(n.bind(null,605)).then((function(n){var a=new n.LocationModalView({onlyAddress:e,restaurant:t});s.a.channel("modal").trigger("show",a)}))):Promise.all([n.e(0),n.e(14)]).then(n.bind(null,606)).then((function(e){var t=new e.LocationView;i.getChildView("main").showChildView("locationRegion",t),setTimeout((function(){t.$el.addClass("show")}),50)}))},"company:leave":function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.a.channel("alert").trigger("show","<b>دلینویی عزیز</b>، <br>سفارش‌های شرکتی در حال توسعه و بهبوده و امکان استفاده از این مدل وجود نداره، ما بزودی با مدلی جذاب و با کیفیت، امکان سفارش شرکتی رو برای شما فراهم می کنیم. <br><br>آدرس شرکت شما به صورت خودکار در لیست آدرس های شما ذخیره شده و می تونید به صورت یک کاربر عادی سفارش تون رو در سایت دلینو ثبت کنید.",{confirm:function(){$.ajax({url:h.G,method:"PUT"}).done((function(n){t.data.userCompanyList=null;var r="شرکت شما به عنوان آدرس جدید در لیست آدرس ها <br/>اضافه شد.<br/><br/> کد تخفیف <b class='en-num'>${COUPON}</b> برای قدردانی از همراهی شما در این مدت در نظر گرفته شده است. <br/>%${DISCOUNT} تخفیف تا سقف سفارش ${MAX_DISCOUNT} هزار تومان <br/><small>(فرصت استفاده تا پایان شهریور ماه )</small>",o=n.label,l=n.discount,c=n.maxAmount/1e3,u=s.a.channel("alert");r=r.replace("${COUPON}",o).replace("${DISCOUNT}",l).replace("${MAX_DISCOUNT}",c),u.trigger("show",r,{icon:'<i class="fo fo-discount"></i>'}),t.reloadAddressList().then((function(){if(e){var t=i.getChildView("main");t&&"home"==t.page&&t.ui.btnCompany.parent().remove()}else a.trigger("location:open")}))}))},icon:'<i class="fo fo-building"></i>'})},"location:close":function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];setTimeout((function(){var t=i.getChildView("main");if(t)if("home"==t.page||"search"==t.page){if(t.getRegion("locationRegion")){var n=t.getChildView("locationRegion");if(n)n.$el.removeClass("show"),setTimeout((function(){n.destroy()}),300);else{var a=i.getChildView("modal");a&&"location"==a.name&&a.closeModal()}e&&t._isAttached&&t.locationChanged()}}else"restaurant"==t.page&&setTimeout((function(){var e=i.getChildView("modal");e&&"location"==e.name&&e.closeModal()}),10)}),10)},"page:scroll":function(e,t){Object(w.a)(e||document.body,t||{duration:300,offset:e?0:80})},"seo:set":function(e){e&&b()(e)},seo:function(e,n){var a;try{if(e){var i=t.seoList[e];i&&(a={title:i.title(n),description:i.description(n)})}else a=n;a&&b()(a)}catch(e){}},"food:modal:show":function(e){if(l.a.isInt(e)){var t=i.getChildView("main");if("restaurant"==t.page){var a=t.getFood(e);if(a){var o=s.a.channel("modal");n.e(34).then(n.bind(null,607)).then((function(e){o.trigger("show",new e.FoodModal({model:a}))}))}}}else data,r.a.Model}}).reply({"user:credit":function(){return new Promise((function(e,n){$.get(h.E).always((function(a,i){if("success"==i&&t.data.user){var r=a.credit;t.data.user.set("credit",r),e(r)}n()}))}))},"user:address:reload":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,o){var l=!!e,c=!1;"add"==e?t.makActiveAddressId=n:"delete"==e&&t.data.address&&t.data.address.get("id")==n&&(t.data.address=null,c=!0),t.reloadAddressList(l).then((function(){if(null===e&&i.reloadcart(!0),l){var o=i.getChildView("main");if("restaurant"==o.page)a.trigger("location:close",!0);else if("checkout"==o.page)o.loadAddress();else if(o.getRegion("locationRegion")){var u=o.getChildView("locationRegion");u&&u.getChildView("main").reload(t.data.userAddressList),"add"==e?setTimeout((function(){a.trigger("location:close",!0)}),700):1==c&&a.trigger("location:close",!0)}s.a.channel("cart").trigger("set","address",n)}r(t.data.userAddressList)})).catch((function(t){setTimeout((function(){a.request("user:address:reload",e,n)}),500)}))}))},"location:data":function(){var e,n;if(t.data.address){var a=t.data.address;e=a.get("title")?a.get("title")+" <small>("+a.get("areaTitle")+")</small>":a.get("areaTitle");var i=t.data.cityList.get(a.get("cityId"));n={type:"address",address:t.data.address,city:i,position:[t.data.address.get("lat"),t.data.address.get("lng")]}}else if(t.data.area){var r=t.data.cityList.get(t.data.area.get("cityId"));e=t.data.area.get("title")+" <small>("+r.get("title")+")</small>",n={type:"area",city:t.data.city,area:t.data.area,position:[t.data.city.get("lat"),t.data.city.get("lng")]}}else e=t.data.city.get("title"),n={type:"city",city:t.data.city,area:null,position:[t.data.city.get("lat"),t.data.city.get("lng")]};return{data:n,text:e}},"address:set":function(e){var n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.data.address&&t.data.address.get("id")==e)n=!0;else{var o=t.data.userAddressList.get(e);o?(t.data.address=o,t.data.userAddressList.each((function(t){e==t.get("id")?t.set("active",!0):t.set("active",!1)})),l.a.hasLocalStorage&&localStorage.setItem("address",e),r&&s.a.channel("cart").trigger("set","address",e)):n=!1}return i&&a.trigger("location:close"),n},"area:set":function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=!0,u=t.data.cityList.get(n);if(u){var d,f=y(u.get("areaList"));try{for(f.s();!(d=f.n()).done;){var h=d.value;if(h.id===e){t.data.area=new r.a.Model(h);var p=u.get("id");l.a.hasLocalStorage&&(localStorage.removeItem("address"),localStorage.setItem("area_"+p,h.id));var g=!0;t.data.city.get("id")!=p&&(a.request("city:set",p,!0),g=!1),t.data.address&&(t.data.address=null,t.data.userAddressList.each((function(e){e.set("active",!1)}))),o&&g&&setTimeout((function(){var e=i.getChildView("main");e&&"home"==e.page&&Object(w.a)($(".home-suggest-list:eq(0)")[0],{duration:300,offset:-150})}),250),c=!0;break}}}catch(e){f.e(e)}finally{f.f()}}else console.log("city not found");return s&&a.trigger("location:close"),c},"city:set":function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1,o=n?t.data.cityList.get(Number(e)):t.data.cityList.findWhere({name:e.toLowerCase()});if(o){if(t.data.city=o,a||(t.data.address=null),l.a.hasLocalStorage){localStorage.removeItem("address"),1!=o.get("id")?localStorage.setItem("city",o.get("id")):localStorage.removeItem("city");var s,c=Number(localStorage.getItem("area_"+o.get("id"))),u=y(o.get("areaList"));try{for(u.s();!(s=u.n()).done;){var d=s.value;if(d.id===c){t.data.area=new r.a.Model(d);break}}}catch(e){u.e(e)}finally{u.f()}}i=!0}return i},"app:get":function(e){return t.data[e]},"app:set":function(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.data[e]=n,a&&l.a.hasLocalStorage&&(n?localStorage.setItem(e,n):localStorage.removeItem(e)),!0}});var i=new m.a({el:this.region.el,replaceElement:!0}),o=new f({rootView:i});this.getRegion().show(i),r.a.history.start({pushState:!0}),l.b.mobile?Promise.all([n.e(0),n.e(5)]).then(n.bind(null,605)):Promise.all([n.e(0),n.e(14)]).then(n.bind(null,606))},initialize:function(e){},reloadAddressList:function(e){var t=this;return new Promise((function(n,a){t.data.user?$.get(h.A).always((function(i,r){"success"==r?(t.setAddressList(i,e),n()):a()})):a()}))},setAddressList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.length>0){var n=this.makActiveAddressId||!1;if(l.a.hasLocalStorage&&(n=Number(localStorage.getItem("address")),this.makActiveAddressId&&(n=this.makActiveAddressId,this.makActiveAddressId=null,localStorage.setItem("address",n))),this.data.userAddressList=new p.a(e,{parse:!0,activeId:Number(n)}),n){var a=this.data.userAddressList.get(n);if(a){this.data.address=a;var i=this.data.cityList.get(a.get("cityId"));if(i&&(this.data.city=i,localStorage.setItem("city",i.get("id"))),!t){var r=this.getRegion("main");if(r.currentView){var o=r.currentView.getChildView("main");if(o&&o)try{o.onUser(!0)}catch(e){}}}}else localStorage.removeItem("address")}}else this.data.userAddressList=null,this.data.address=null},loadUserCompany:function(){var e=this;$.get("/user/company").always((function(t,a){"success"==a&&t&&t.length>0&&(e.data.userCompanyList=t,n.e(15).then(n.bind(null,608)))}))},loadChat:function(){var e=this;window.addEventListener("goftino_ready",(function(){try{e.data.user&&Goftino.setUser({email:e.data.user.get("email"),name:e.data.user.get("fullName"),phone:e.data.user.get("mobile"),avatar:e.data.user.get("image")?e.data.user.get("image").replace("#SIZEOFIMAGE#","200x200"):"https://www.delino.com/img/general/user-default-gray.png",forceUpdate:!0})}catch(e){console.log(e)}}))},onBeforeStart:function(e,t){if(this.data={businessPartner:null,user:null,userAddressList:null,userCompanyList:null,loginAction:"",cityList:null,city:null,area:null,address:null,activeOrders:[],foodCatList:null,brandList:[],cartRestData:null,mapLoaded:!1,search:null,appView:!1,cityDefined:!1},null!==t){var n,a;this.data.cityList=new p.b(t.data.city,{parse:!0});var i=!1;l.a.hasLocalStorage&&localStorage.getItem("city")&&(i=!0,1==(n=Number(localStorage.getItem("city")))&&localStorage.removeItem("city"));var o=1;if(n&&n!=o&&(this.data.cityList.get(n)?o=n:localStorage.removeItem("city")),this.data.city=this.data.cityList.get(o),t.user&&(this.data.user=new g.a(t.user),this.setAddressList(t.addressList),this.loadUserCompany()),this.loadChat(),l.a.hasLocalStorage){a=Number(localStorage.getItem("area_"+o));var s,c=y(this.data.city.get("areaList"));try{for(c.s();!(s=c.n()).done;){var u=s.value;if(u.id===a){this.data.area=new r.a.Model(u),i=!0;break}}}catch(e){c.e(e)}finally{c.f()}}this.data.cityDefined=i;var d={};t.seo.forEach((function(e){e.titleTemplate=e.titleTemplate.replace(/\#(\w+)\#/gi,(function(e){return"<%="+e.replace(/\#/gi,"").toLowerCase()+"%>"})),e.descriptionTemplate=e.descriptionTemplate.replace(/\#(\w+)\#/gi,(function(e){return"<%="+e.replace(/\#/gi,"").toLowerCase()+"%>"})),d[e.tag]={title:_.template(e.titleTemplate),description:_.template(e.descriptionTemplate)}})),this.seoList=d,this.data.foodCatList=t.data.foodCategoryList}}}),x=!!document.documentMode,I=new k;window.appView?I.start(null):new Promise((function(e,t){$.get({url:h.a,cache:!0}).always((function(n,a){if("success"==a){var i={data:n};$.get(h.y).always((function(n,a){"success"==a?(i.seo=n,$.get(h.L).always((function(t,n){"success"==n&&t?(i.user=t,$.get(h.A).always((function(t,n){"success"==n&&(i.addressList=t),e(i)}))):e(i)}))):(setTimeout((function(){location.reload()}),1e3),t("seo tpl failed."))}))}else t("init failed.")}))})).then((function(e){x?($("html").addClass("ie"),n.e(4).then(n.t.bind(null,609,7)).then((function(){console.log("ie-polyfill loaded."),I.start(e)}))):I.start(e)})).catch((function(e){console.error("Failed:",e)})),l.b.mobile||l.b.tablet?n.e(12).then(n.t.bind(null,610,7)).then((function(e){e.attach(document.body)})):n.e(13).then(n.t.bind(null,611,7)),$.ajaxSetup({timeout:6e4,cache:!1}),$.fn.extend({customInput:function(e){var t=this;return $.fn.customInput.destroy=function(){t.each((function(){$(this).off("focus").off("blur")}))},this.each((function(){var e=$(this);e.val()?e.parent().addClass("hasvalue"):e.parent().removeClass("hasvalue"),e.on("focus",(function(t){e.parent().addClass("focused")})),e.on("blur",(function(t){e.val()?e.parent().addClass("hasvalue"):e.parent().removeClass("hasvalue"),e.addClass("hasvalue"),e.parent().removeClass("focused")}))}))}})}]);